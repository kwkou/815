<properties 
   pageTitle="Azure 存储空间可伸缩性和性能目标 |Azure"
   description="了解有关 Azure 存储帐户的可伸缩性和性能目标的信息，包括容量、请求速率以及入站和出站带宽。了解每个 Azure 存储服务中各分区的性能目标。"
   services="storage"
   documentationCenter="na"
   authors="tamram"
   manager="na"
   editor="na" />
   
<tags ms.service="storage" ms.date="03/20/2015" wacn.date="04/11/2015"/>


# Azure 存储空间可伸缩性和性能目标

本主题介绍 Microsoft Azure 存储空间的可伸缩性和性能主题。有关其他 Azure 限制的摘要，请参阅 [Azure 订阅和服务限制、配额与约束](/documentation/articles/azure-subscription-service-limits)。

> [AZURE.NOTE] 所有存储帐户都在新的扁平网络拓扑上运行，无论它们在何时创建，都支持下文概述的可伸缩性和性能目标。有关 Azure 存储的扁平网络体系结构和可伸缩性的详细信息，请参阅 Azure 存储团队博客。

> [AZURE.NOTE] 以下所列的可伸缩性和性能目标为高端目标，但却是能够实现的。在任何情况下，你的存储帐户实现的请求速率和带宽取决于存储对象大小、使用的访问模式、应用程序执行的工作负荷类型。请务必测试你的服务，以确定其性能是否达到你的要求。如果可能，应避免流量速率突发峰值，并确保流量在各个分区上均匀分布  
当你的应用程序达到分区能够处理的工作负荷极限时，Azure 存储将开始返回错误代码 503（服务器忙）或错误代码 500（操作超时）响应。发生这种情况时，应用程序应使用指数退让策略进行重试。使用指数退让策略，可以减少分区上的负载，缓解该分区的流量高峰。

如果你的应用程序的需求超过了单个存储帐户的可伸缩性目标，则在生成应用程序时应该让它使用多个存储帐户，并将数据对象分布在这些存储帐户中。单个 Azure 订阅允许使用 100 个存储帐户。请参阅[存储定价详细信息](/home/features/storage/#home_stor_pri)，了解有关批量定价的信息。

## 存储帐户的可伸缩性目标

存储帐户的可伸缩性目标取决于该帐户的创建区域。以下各节概述了美国区域以及欧洲和亚洲区域的可伸缩性目标。

### 美国区域中的标准存储帐户的可伸缩性目标

下表说明了美国区域中的标准存储帐户的可伸缩性目标，基于所选的冗余级别：

<table>
<tr>
<th>总帐户容量</th>
<th>总请求速率（假定对象大小为 1KB）</th>
<th>地域冗余存储帐户的总带宽</th>
<th>本地冗余存储帐户的总带宽</th>
<tr>
<td>500 TB</td>
<td>每秒最多 20,000 个实体或消息</td>
<td><ul>
<li>*入站：每秒最多 10 Gb</li>
<li>*出站：每秒最多 20 Gb</li>
</ol>
</td>
<td><ul>
<li>*入站：每秒最多 20 Gb</li>
<li>*出站：每秒最多 30 Gb</li>
</tr>
</table>	

*入站是指发送到存储帐户的所有数据（请求）。  

*出站是指从存储帐户接收的所有数据（响应）。  

### 欧洲和亚洲区域中的标准存储帐户的可伸缩性目标

下表说明了欧洲和亚洲区域中的存储帐户的可伸缩性目标，基于所选的冗余级别：

<table>
<tr>
<th>总帐户容量</th>
<th>总请求速率（假定对象大小为 1KB）</th>
<th>地域冗余存储帐户的总带宽</th>
<th>本地冗余存储帐户的总带宽</th>
<tr>
<td>500 TB</td>
<td>每秒最多 20,000 个实体或消息</td>
<td><ul>
<li>*入站：每秒最多 5 Gb</li>
<li>*出站：每秒最多 10 Gb</li>
</ol>
</td>
<td><ul>
<li>*入站：每秒最多 10 Gb</li>
<li>*出站：每秒最多 15 Gb</li>
</tr>
</table>	  

*入站是指发送到存储帐户的所有数据（请求）。  

*出站是指从存储帐户接收的所有数据（响应）。  

### 高级存储帐户的可伸缩性目标

下表介绍在中国北部、美国东部 2 和欧洲西部区域中提供的高级存储帐户的可伸缩性目标：

<table>
<tr>
<th>总帐户容量</th>
<th>本地冗余高级存储帐户的总带宽</th>
<tr>
<td><ul>
<li>磁盘容量：32 TB</li>
<li>快照容量：10 TB</li>
</td>
<td>入站 + 出站最高每秒 50 GB</td>
</table>	

*入站是指发送到存储帐户的所有数据（请求）。  

*出站是指从存储帐户接收的所有数据（响应）。

## Azure 存储中的分区

下表说明了每个服务的单个分区的性能目标：

<table>
<tr>
<th>单个 Blob 的目标吞吐量</th>
<th>单个队列的目标吞吐量（1 KB 消息）</th>
<th>单个表分区的目标吞吐量（1 KB 实体）</th>
<tr>
<td>每秒最多 60 MB，或每秒最多 500 个请求</td>
<td>每秒最多 2000 条消息</td>
<td>每秒最多 2000 个实体</td>
</table>

可容纳存储在 Azure 存储中的数据的每个对象（Blob、消息和实体）都属于某个分区，可用分区键标识。分区决定了 Azure 存储如何在多个服务器之间实现 Blob、消息和实体的负载平衡，以满足这些对象的流量需求。分区键在存储帐户内是唯一的，用于查找 Blob、消息或实体。

对于表，具有相同分区键值的所有实体都分组到同一分区，并存储在同一分区服务器上。在设计应用程序的过程中，了解这一点非常重要。将实体分布在多个分区中能够实现可伸缩性优势，而将实体分组到单个分区中则能够提供数据访问优势，你的应用程序应该平衡这两大优势。将实体分组到分区中，一大关键优势是能够对位于同一分区中的实体执行原子操作，因为一个分区存在于单个服务器上。

分区会对每个存储服务的负载平衡和可伸缩性产生以下影响：

- **Blob**：Blob 的分区键是容器名称 + Blob 名称。这意味着每个 Blob 都有它自己的分区。因此，Blob 可以分布在很多服务器上，以横向扩展对它们的访问。虽然 Blob 可在 Blob 容器中进行逻辑分组，但这种分组不会对分区产生影响。

- **消息**：消息的分区键是队列名称，因此一个队列中的所有消息都分组到单个分区中，由单个服务器提供服务。不同队列可以由不同服务器处理，无论存储帐户有多少队列，都可以平衡负载。

- **实体**：实体的分区键是表名称 + 分区键，其中的分区键是实体的用户定义的 **PartitionKey** 必需属性的值。  
表内的实体可能具有相同的分区键值，在这种情况下，它们分组到同一分区。应用程序可对同一分区内的实体执行原子批量事务处理，因为这些实体从同一服务器获取服务。  
位于同一表中但属于不同分区的实体可在不同服务器之间实现负载平衡，因而可能获得可伸缩性更好的大型表。


<!--HONumber=51-->